# Домашнее задание к занятию «Резервное копирование баз данных» - Протасов Владислав

### Задание 1. Резервное копирование

Кейс

Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

Необходимо описать, какие варианты резервного копирования подходят в случаях:

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

Приведите ответ в свободной форме.

---

1.1 Полное резервное копирование раз в неделю обеспечит надежную базу для восстановления. Дифференциальный бэкап раз в день позволит быстро восстановить данные за конкретный день, накатывая только изменения с момента последнего полного бэкапа.

1.2 Полный бэкап раз в день создает точку восстановления на начало дня. Инкрементные бэкапы раз в час сохраняют изменения, что позволяет восстановить данные до нужного часа. Такой подход обеспечивает гибкость и минимизирует потерю данных.

1.3* Репликация позволит создать актуальную копию базы данных (слейв), которая постоянно обновляется. При сбое основной базы (мастера) слейв может быть быстро переведен в режим мастера, что минимизирует время простоя.

---

Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.2.* Возможно ли автоматизировать этот процесс? Если да, то как?

Приведите ответ в свободной форме.

---

2.1 Для выгрузки базы данных PostgreSQL в специальном архивном формате используется команда pg_dump с параметром -Fc, что позволяет создать сжатый файл, подходящий для дальнейшего восстановления с помощью утилиты pg_restore. Например, команда $ pg_dump -Fc mydb > db.dump создаст файл db.dump. Для восстановления базы данных из этого файла, предварительно удаляя текущее содержимое, применяется команда $ pg_restore -d mydb --clean --create db.dump. Параметр --clean удаляет существующие объекты перед их созданием, а --create генерирует команду для создания базы данных перед подключением к ней.

---

Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

3.2.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

Приведите ответ в свободной форме.

---

3.1 Для резервирования данных в MySQL можно использовать команду mysqlbackup с параметром --incremental-base=history:last_full_backup, что позволяет создать инкрементную резервную копию, основываясь на последнем полном резервном копировании.

3.2 Использование репликации в MySQL предоставляет ряд преимуществ по сравнению с обычным резервным копированием. Во-первых, репликация позволяет распределять нагрузку, что улучшает производительность, так как запросы на чтение могут обрабатываться на репликах, освобождая основной сервер для операций записи. Во-вторых, она обеспечивает отказоустойчивость: в случае сбоя основного сервера можно переключиться на реплику для продолжения работы. Кроме того, реплики позволяют выполнять тяжелые SQL-запросы без влияния на производительность основной базы данных и обеспечивают возможность резервирования данных без остановки работы системы.

---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---
